<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Everything ever written, everything that will be written, exists in Wiki 2.0" />
    <title>Wiki 2.0</title>
    <link rel="icon" type="image/png" href="/img/favicon.png" />
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg" />
    <link rel="apple-touch-icon" href="/img/icon_192x192.png" />
    <link rel="manifest" href="/manifest.json" />
    <link href="/css/index.css" rel="stylesheet" />
    <link href="/css/themes/default-light.css" rel="stylesheet" />
    <link href="/css/themes/default-dark.css" rel="stylesheet" media="(prefers-color-scheme: dark)" />
    <script type="module" src="/js/components/wiki-menu.js"></script>
    <script type="module" src="/js/components/uri-router.js"></script>
  </head>

  <body>
    <div id="menu-bar">
      <a href="/" id="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 239 239">
          <path
            d="M119.5+9C58.4725+8.99998+9+58.4725+9+119.5C9+180.527+58.4725+230+119.5+230C180.527+230+230+180.527+230+119.5C230+58.4725+180.527+9+119.5+9ZM119.5+6.6103e-06C185.498+6.6103e-06+239+53.502+239+119.5C239+185.498+185.498+239+119.5+239C53.502+239+0+185.498+0+119.5C0+53.502+53.502+3.70007e-05+119.5+6.6103e-06Z"
            opacity="1"
            fill="currentcolor"
          />
          <path
            d="M119.625+18C104.537+18+90.277+21.3764+77.4062+27.2813L77.4062+153.219C77.4063+153.763+77.5984+153.958+77.75+154.188L119.625+102.438L161.5+154.188C161.652+153.958+161.844+153.763+161.844+153.219L161.844+27.2813C148.973+21.3764+134.713+18+119.625+18Z"
            opacity="1"
            fill="currentcolor"
          />
        </svg>
        Wiki 2.0
      </a>
      <nav aria-label="Menu" is="wiki-menu">
        <a href="/page">Browse</a>
        <a href="/search">Search</a>
        <a href="/bookmarks">Bookmarks</a>
      </nav>
    </div>

    <main>
      <uri-router path="/">
        <template>
          <div id="browse">
            <div class="cover">
              <section class="page-left">
                <div class="page-prev"></div>
                <div class="page-current"></div>
                <div id="wiki-image">
                  <wiki-image></wiki-image>
                </div>
                <div class="page-next"></div>
              </section>
              <div class="page-divider"></div>
              <section class="page-right">
                <div class="page-prev"></div>
                <div class="page-current">
                  <div id="wiki-text">
                    <wiki-bookmark default-title="Untitled bookmark">
                      <input id="bookmark-checkbox" type="checkbox" />
                      <label aria-label="Bookmarked" for="bookmark-checkbox"></label>
                      <input aria-label="Bookmark title" type="text" />
                    </wiki-bookmark>
                    <wiki-text role="article">
                      <div style="white-space: normal; font-family: Helvetica, sans-serif">
                        <div aria-hidden="true" style="margin: 4% auto 0 auto; width: 7rem">
                          <svg
                            style="fill-rule: evenodd"
                            xmlns="http://www.w3.org/2000/svg"
                            version="1.1"
                            viewBox="0 0 239 239"
                          >
                            <path
                              d="M119.5+9C58.4725+8.99998+9+58.4725+9+119.5C9+180.527+58.4725+230+119.5+230C180.527+230+230+180.527+230+119.5C230+58.4725+180.527+9+119.5+9ZM119.5+6.6103e-06C185.498+6.6103e-06+239+53.502+239+119.5C239+185.498+185.498+239+119.5+239C53.502+239+0+185.498+0+119.5C0+53.502+53.502+3.70007e-05+119.5+6.6103e-06Z"
                              opacity="1"
                              fill="currentcolor"
                            />
                            <path
                              d="M119.625+18C104.537+18+90.277+21.3764+77.4062+27.2813L77.4062+153.219C77.4063+153.763+77.5984+153.958+77.75+154.188L119.625+102.438L161.5+154.188C161.652+153.958+161.844+153.763+161.844+153.219L161.844+27.2813C148.973+21.3764+134.713+18+119.625+18Z"
                              opacity="1"
                              fill="var(--bookmark-bookmarked)"
                            />
                          </svg>
                        </div>
                        <h1 style="text-align: center; font-size: 4rem; margin-top: 2.67rem; margin-bottom: 1rem">
                          Wiki 2.0
                        </h1>
                        <p style="text-align: center; font-size: 1rem">
                          Everything ever written, everything that will be written, exists in this wiki.<br />
                          With its 9Ã—10<sup>11 589</sup> pages, the wiki is complete, all you need to do is find the
                          right page...
                        </p>
                      </div>
                    </wiki-text>
                    <div id="page-number-wrapper">
                      <input id="page-number" aria-label="Page number" type="text" />
                    </div>
                  </div>
                </div>
                <div class="page-next"></div>
              </section>
            </div>

            <div class="page-turner">
              <button disabled data-modifier="-1" aria-label="Previous page">&lsaquo;</button>
            </div>
            <div id="range-wrapper">
              <div id="progress-percentage" aria-hidden="true"></div>
              <wiki-range>
                <input aria-label="Progress in Wiki" type="range" step="any" />
              </wiki-range>
            </div>
            <div class="page-turner">
              <button disabled data-modifier="1" aria-label="Next page">&rsaquo;</button>
            </div>
          </div>
          <script type="module" src="/js/components/wiki-bookmark.js"></script>
          <script type="module" src="/js/components/wiki-range.js"></script>
          <script type="module" src="/js/components/wiki-text.js"></script>
          <script type="module" src="/js/components/wiki-image.js"></script>
          <script type="module" src="/js/browse.js"></script>
        </template>
      </uri-router>

      <uri-router path="/search">
        <template>
          <div id="search">
            <svg style="fill-rule: evenodd" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 239 239">
              <path
                d="M119.5+9C58.4725+8.99998+9+58.4725+9+119.5C9+180.527+58.4725+230+119.5+230C180.527+230+230+180.527+230+119.5C230+58.4725+180.527+9+119.5+9ZM119.5+6.6103e-06C185.498+6.6103e-06+239+53.502+239+119.5C239+185.498+185.498+239+119.5+239C53.502+239+0+185.498+0+119.5C0+53.502+53.502+3.70007e-05+119.5+6.6103e-06Z"
                opacity="1"
                fill="currentcolor"
              />
              <path
                d="M119.625+18C104.537+18+90.277+21.3764+77.4062+27.2813L77.4062+153.219C77.4063+153.763+77.5984+153.958+77.75+154.188L119.625+102.438L161.5+154.188C161.652+153.958+161.844+153.763+161.844+153.219L161.844+27.2813C148.973+21.3764+134.713+18+119.625+18Z"
                opacity="1"
                fill="var(--bookmark-bookmarked)"
              />
            </svg>
            <form aria-label="Search">
              <textarea is="wiki-textarea" aria-labelledby="search-button"></textarea>
              <button id="search-button" type="submit">Search</button>
            </form>
          </div>

          <section aria-label="Search results" id="search-results"></section>
          <script type="module" src="/js/components/wiki-textarea.js"></script>
          <script type="module" src="/js/components/wiki-text.js"></script>
          <script type="module" src="/js/search.js"></script>
        </template>
      </uri-router>

      <uri-router path="/bookmarks">
        <template>
          <ul id="bookmarks" aria-label="Bookmarks" is="wiki-bookmark-list"></ul>
          <script type="module" src="/js/components/wiki-bookmark-list.js"></script>
        </template>
      </uri-router>

      <uri-router path="/link">
        <template>
          <script type="module">
            import { base64ToString } from "/js/utils/strings.js";

            const workerSearch = new Worker("/js/content-finder.js", {
              type: "module",
            });
            workerSearch.onmessage = (e) => {
              window.location.href = window.location.origin + "/page/" + e.data.pageNumber;
            };

            try {
              const link = base64ToString(window.location.pathname.split("/link/")?.[1] || "");
              workerSearch.postMessage(link);
            } catch {
              window.location.href = window.location.origin;
            }
          </script>
        </template>
      </uri-router>
    </main>
  </body>
</html>
