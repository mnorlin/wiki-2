<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Everything ever written, everything that will be written, exists in Wiki 2.0" />
    <title>Wiki 2.0</title>
    <link rel="icon" type="image/png" href="/img/favicon.png" />
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg" />
    <link rel="apple-touch-icon" href="/img/icon_192x192.png" />
    <link rel="manifest" href="/manifest.json" />
    <link href="/css/index.css" rel="stylesheet" />
    <link href="/css/themes/default-light.css" rel="stylesheet" />
    <link href="/css/themes/default-dark.css" rel="stylesheet" media="(prefers-color-scheme: dark)" />
    <script type="module" src="/js/components/wiki-menu.js"></script>
    <script type="module" src="/js/components/uri-router.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        if (!Boolean(window.chrome)) {
          document.body.innerText = "Sorry, at the moment Wiki 2.0 only works in Google Chrome";
        }
      });
    </script>
  </head>

  <body>
    <div id="menu-bar">
      <a href="/" id="logo">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 239 239">
          <path
            d="M119.5+9C58.4725+8.99998+9+58.4725+9+119.5C9+180.527+58.4725+230+119.5+230C180.527+230+230+180.527+230+119.5C230+58.4725+180.527+9+119.5+9ZM119.5+6.6103e-06C185.498+6.6103e-06+239+53.502+239+119.5C239+185.498+185.498+239+119.5+239C53.502+239+0+185.498+0+119.5C0+53.502+53.502+3.70007e-05+119.5+6.6103e-06Z"
          />
          <path
            d="M119.625+18C104.537+18+90.277+21.3764+77.4062+27.2813L77.4062+153.219C77.4063+153.763+77.5984+153.958+77.75+154.188L119.625+102.438L161.5+154.188C161.652+153.958+161.844+153.763+161.844+153.219L161.844+27.2813C148.973+21.3764+134.713+18+119.625+18Z"
          />
        </svg>
      </a>
      <nav aria-label="Menu" is="wiki-menu">
        <a href="/?page=/browse">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
            <path
              d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"
            />
          </svg>
        </a>
        <a href="/?page=/search">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
            <path
              d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
            />
          </svg>
        </a>
        <a href="/?page=/bookmarks">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
            <path
              d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"
            />
          </svg>
        </a>
      </nav>
      <a target="_blank" rel="noopener" href="https://github.com/mnorlin/wiki-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
          <path
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
          />
        </svg>
      </a>
    </div>

    <main>
      <uri-router path="/">
        <template>
          <div id="browse">
            <div class="cover loading">
              <div class="pages-wrapper"></div>
            </div>
            <div class="page-turner">
              <button data-modifier="-1" aria-label="Previous page">&lsaquo;</button>
            </div>
            <div id="range-wrapper">
              <div id="progress-percentage" aria-hidden="true"></div>
              <wiki-range>
                <input aria-label="Progress in Wiki" type="range" step="any" />
              </wiki-range>
            </div>
            <div class="page-turner">
              <button data-modifier="1" aria-label="Next page">&rsaquo;</button>
            </div>
          </div>
          <script type="module" src="/js/components/wiki-bookmark.js"></script>
          <script type="module" src="/js/components/wiki-range.js"></script>
          <script type="module" src="/js/components/wiki-text.js"></script>
          <script type="module" src="/js/components/wiki-image.js"></script>
          <script type="module" src="/js/browse.js"></script>
        </template>
      </uri-router>

      <uri-router path="/search">
        <template>
          <div id="search">
            <svg style="fill-rule: evenodd" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 239 239">
              <path
                d="M119.5+9C58.4725+8.99998+9+58.4725+9+119.5C9+180.527+58.4725+230+119.5+230C180.527+230+230+180.527+230+119.5C230+58.4725+180.527+9+119.5+9ZM119.5+6.6103e-06C185.498+6.6103e-06+239+53.502+239+119.5C239+185.498+185.498+239+119.5+239C53.502+239+0+185.498+0+119.5C0+53.502+53.502+3.70007e-05+119.5+6.6103e-06Z"
                opacity="1"
                fill="currentcolor"
              />
              <path
                d="M119.625+18C104.537+18+90.277+21.3764+77.4062+27.2813L77.4062+153.219C77.4063+153.763+77.5984+153.958+77.75+154.188L119.625+102.438L161.5+154.188C161.652+153.958+161.844+153.763+161.844+153.219L161.844+27.2813C148.973+21.3764+134.713+18+119.625+18Z"
                opacity="1"
                fill="var(--bookmark-bookmarked)"
              />
            </svg>
            <form aria-label="Search">
              <textarea is="wiki-textarea" aria-labelledby="search-button"></textarea>
              <button id="search-button" type="submit">Search</button>
            </form>
          </div>

          <section aria-label="Search results" id="search-results"></section>
          <script type="module" src="/js/components/wiki-textarea.js"></script>
          <script type="module" src="/js/components/wiki-text.js"></script>
          <script type="module" src="/js/search.js"></script>
        </template>
      </uri-router>

      <uri-router path="/bookmarks">
        <template>
          <ul id="bookmarks" aria-label="Bookmarks" is="wiki-bookmark-list"></ul>
          <script type="module" src="/js/components/wiki-bookmark-list.js"></script>
        </template>
      </uri-router>

      <uri-router path="/link">
        <template>
          <script type="module">
            import { base64ToString } from "/js/utils/strings.js";

            const workerSearch = new Worker("/js/content-finder.js", {
              type: "module",
            });
            workerSearch.onmessage = (e) => {
              window.location.href = window.location.origin + "/page#" + e.data.pageNumber;
            };

            try {
              const link = base64ToString(window.location.hash.split(1) || "");
              workerSearch.postMessage(link);
            } catch {
              window.location.href = window.location.origin;
            }
          </script>
        </template>
      </uri-router>
    </main>
  </body>
</html>
