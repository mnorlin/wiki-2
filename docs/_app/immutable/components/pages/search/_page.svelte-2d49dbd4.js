import{_ as Y}from"../../../chunks/preload-helper-c28b9807.js";import{S as ae,i as re,s as se,l as M,r as I,a as V,m as S,n as E,u as D,h as b,c as L,p as s,b as ne,I as i,v as O,B as J,_ as W,a4 as le,$ as G,q as oe,U as K,V as $,f as F,d as ie,t as j,Q as ce,D as ue,o as fe,Y as he,w as _e,x as de,y as me,z as ve,g as pe}from"../../../chunks/index-52270b8f.js";import{l as ge}from"../../../chunks/lcg-params-ea5a6b99.js";function Z(r){return Array.from(r).length}function B(r,e,a){return Array.from(r).slice(e,a).join("")}function be(r){const e=new Uint16Array(r.length);for(let a=0;a<e.length;a++)e[a]=r.charCodeAt(a);return btoa(String.fromCharCode(...new Uint8Array(e.buffer)))}function Ee(r){let e,a,t,c=r[2]===r[0]?"Exact match":"Nested match",d,_,v,u,p,k,A,f,w,T,y,N=r[3](r[1])+"",o,R,l,h,n,C=B(r[2],0,300)+"",P;return{c(){e=M("div"),a=M("h2"),t=M("a"),d=I(c),v=V(),u=M("nav"),p=M("a"),k=I("Wiki 2.0"),A=I(` \u203A
		`),f=M("a"),w=I("Page"),T=I(` \u203A
		`),y=M("a"),o=I(N),R=I(" %"),h=V(),n=M("div"),P=I(C),this.h()},l(m){e=S(m,"DIV",{});var g=E(e);a=S(g,"H2",{class:!0});var q=E(a);t=S(q,"A",{class:!0,href:!0});var X=E(t);d=D(X,c),X.forEach(b),q.forEach(b),v=L(g),u=S(g,"NAV",{class:!0});var z=E(u);p=S(z,"A",{href:!0,class:!0});var x=E(p);k=D(x,"Wiki 2.0"),x.forEach(b),A=D(z,` \u203A
		`),f=S(z,"A",{href:!0,class:!0});var H=E(f);w=D(H,"Page"),H.forEach(b),T=D(z,` \u203A
		`),y=S(z,"A",{href:!0,class:!0});var U=E(y);o=D(U,N),R=D(U," %"),U.forEach(b),z.forEach(b),h=L(g),n=S(g,"DIV",{class:!0});var Q=E(n);P=D(Q,C),Q.forEach(b),g.forEach(b),this.h()},h(){s(t,"class","result-link svelte-nzo0fx"),s(t,"href",_="/browse#"+r[1]),s(a,"class","svelte-nzo0fx"),s(p,"href","/"),s(p,"class","svelte-nzo0fx"),s(f,"href","/browse"),s(f,"class","svelte-nzo0fx"),s(y,"href",l=r[2]===r[0]?`/?path=/link#${r[4]}`:`/browse#${r[1]}`),s(y,"class","svelte-nzo0fx"),s(u,"class","result-breadcrumb svelte-nzo0fx"),s(n,"class","snippet svelte-nzo0fx")},m(m,g){ne(m,e,g),i(e,a),i(a,t),i(t,d),i(e,v),i(e,u),i(u,p),i(p,k),i(u,A),i(u,f),i(f,w),i(u,T),i(u,y),i(y,o),i(y,R),i(e,h),i(e,n),i(n,P)},p(m,[g]){g&5&&c!==(c=m[2]===m[0]?"Exact match":"Nested match")&&O(d,c),g&2&&_!==(_="/browse#"+m[1])&&s(t,"href",_),g&2&&N!==(N=m[3](m[1])+"")&&O(o,N),g&7&&l!==(l=m[2]===m[0]?`/?path=/link#${m[4]}`:`/browse#${m[1]}`)&&s(y,"href",l),g&4&&C!==(C=B(m[2],0,300)+"")&&O(P,C)},i:J,o:J,d(m){m&&b(e)}}}function we(r,e,a){let{searchTerm:t}=e,{pageNumber:c}=e,{content:d}=e;function _(u){return(Number(BigInt(u)*10000n/ge.m)/100).toFixed(1)}const v=be(t);return r.$$set=u=>{"searchTerm"in u&&a(0,t=u.searchTerm),"pageNumber"in u&&a(1,c=u.pageNumber),"content"in u&&a(2,d=u.content)},[t,c,d,_,v]}class ye extends ae{constructor(e){super(),re(this,e,we,Ee,se,{searchTerm:0,pageNumber:1,content:2})}}function ee(r,e,a){const t=r.slice();return t[8]=e[a],t}function te(r){let e,a;return e=new ye({props:{searchTerm:r[0],content:r[8].searchString,pageNumber:r[8].pageNumber}}),{c(){_e(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,c){me(e,t,c),a=!0},p(t,c){const d={};c&1&&(d.searchTerm=t[0]),c&2&&(d.content=t[8].searchString),c&2&&(d.pageNumber=t[8].pageNumber),e.$set(d)},i(t){a||(F(e.$$.fragment,t),a=!0)},o(t){j(e.$$.fragment,t),a=!1},d(t){ve(e,t)}}}function Ae(r){let e,a,t,c,d,_,v,u,p,k,A,f,w,T,y,N=r[1],o=[];for(let l=0;l<N.length;l+=1)o[l]=te(ee(r,N,l));const R=l=>j(o[l],1,1,()=>{o[l]=null});return{c(){e=M("div"),a=W("svg"),t=W("path"),c=W("path"),d=V(),_=M("form"),v=le("textarea","wiki-textarea"),u=V(),p=M("button"),k=I("Search"),A=V(),f=M("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=S(l,"DIV",{id:!0,class:!0});var h=E(e);a=G(h,"svg",{style:!0,xmlns:!0,version:!0,viewBox:!0,class:!0});var n=E(a);t=G(n,"path",{d:!0,opacity:!0,fill:!0}),E(t).forEach(b),c=G(n,"path",{d:!0,opacity:!0,fill:!0}),E(c).forEach(b),n.forEach(b),d=L(h),_=S(h,"FORM",{"aria-label":!0,class:!0});var C=E(_);v=S(C,"TEXTAREA",{is:!0,"aria-labelledby":!0,class:!0}),E(v).forEach(b),u=L(C),p=S(C,"BUTTON",{id:!0,type:!0,class:!0});var P=E(p);k=D(P,"Search"),P.forEach(b),C.forEach(b),A=L(h),f=S(h,"DIV",{class:!0});var m=E(f);for(let g=0;g<o.length;g+=1)o[g].l(m);m.forEach(b),h.forEach(b),this.h()},h(){s(t,"d","M119.5+9C58.4725+8.99998+9+58.4725+9+119.5C9+180.527+58.4725+230+119.5+230C180.527+230+230+180.527+230+119.5C230+58.4725+180.527+9+119.5+9ZM119.5+6.6103e-06C185.498+6.6103e-06+239+53.502+239+119.5C239+185.498+185.498+239+119.5+239C53.502+239+0+185.498+0+119.5C0+53.502+53.502+3.70007e-05+119.5+6.6103e-06Z"),s(t,"opacity","1"),s(t,"fill","currentcolor"),s(c,"d","M119.625+18C104.537+18+90.277+21.3764+77.4062+27.2813L77.4062+153.219C77.4063+153.763+77.5984+153.958+77.75+154.188L119.625+102.438L161.5+154.188C161.652+153.958+161.844+153.763+161.844+153.219L161.844+27.2813C148.973+21.3764+134.713+18+119.625+18Z"),s(c,"opacity","1"),s(c,"fill","var(--primary)"),oe(a,"fill-rule","evenodd"),s(a,"xmlns","http://www.w3.org/2000/svg"),s(a,"version","1.1"),s(a,"viewBox","0 0 239 239"),s(a,"class","svelte-d06saf"),s(v,"is","wiki-textarea"),s(v,"aria-labelledby","search-button"),s(v,"class","svelte-d06saf"),s(p,"id","search-button"),s(p,"type","submit"),s(p,"class","svelte-d06saf"),s(_,"aria-label","Search"),s(_,"class","svelte-d06saf"),s(f,"class","search-results svelte-d06saf"),s(e,"id","search-wrapper"),s(e,"class","svelte-d06saf")},m(l,h){ne(l,e,h),i(e,a),i(a,t),i(a,c),i(e,d),i(e,_),i(_,v),K(v,r[0]),i(_,u),i(_,p),i(p,k),i(e,A),i(e,f);for(let n=0;n<o.length;n+=1)o[n].m(f,null);w=!0,T||(y=[$(v,"input",r[3]),$(_,"submit",r[2])],T=!0)},p(l,[h]){if(h&1&&K(v,l[0]),h&3){N=l[1];let n;for(n=0;n<N.length;n+=1){const C=ee(l,N,n);o[n]?(o[n].p(C,h),F(o[n],1)):(o[n]=te(C),o[n].c(),F(o[n],1),o[n].m(f,null))}for(pe(),n=N.length;n<o.length;n+=1)R(n);ie()}},i(l){if(!w){for(let h=0;h<N.length;h+=1)F(o[h]);w=!0}},o(l){o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)j(o[h]);w=!1},d(l){l&&b(e),ce(o,l),T=!1,ue(y)}}}function Ne(r,e,a){let t="",c=[],d,_;function v(A){if(A.preventDefault(),d==null)return null;a(1,c=[]),_?.postMessage(t);for(let f=0;f<4;f++)d?.postMessage(BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)))}const u=async()=>{const A=await Y(()=>import("../../../chunks/content-generator-a1c8252a.js"),[]),f=await Y(()=>import("../../../chunks/content-finder-10477e23.js"),[]);d=new A.default,d.onmessage=w=>{_?.postMessage(p(t,w.data.text))},_=new f.default,_.onmessage=({data:w})=>{a(1,c=[...c,w])}};fe(async()=>{await u()}),he(()=>{d?.terminate(),_?.terminate()});function p(A,f){const w=Z(f)-Z(A),T=w>0?B(f,0,w):B(f,0,3),y=Math.floor(Math.random()*Z(T));return[B(T,0,y),A,B(T,y)].join("")}function k(){t=this.value,a(0,t)}return[t,c,v,k]}class Te extends ae{constructor(e){super(),re(this,e,Ne,Ae,se,{})}}export{Te as default};
